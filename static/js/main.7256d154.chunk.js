(this["webpackJsonpsolid-rss"]=this["webpackJsonpsolid-rss"]||[]).push([[0],{148:function(e,t,n){e.exports={addFeed:"newFeedSource_addFeed__3jx03"}},149:function(e,t,n){e.exports={page:"profile_page__1pEuL"}},176:function(e,t){},178:function(e,t){},19:function(e,t,n){e.exports={container:"feedSourceList_container__1fvDu",item:"feedSourceList_item__1zbJ4",feedSourceElement:"feedSourceList_feedSourceElement__12tOi",action:"feedSourceList_action__1Pj5B"}},21:function(e,t,n){e.exports={page:"home_page__2ZXon",nav:"home_nav__Da3wD",navContainer:"home_navContainer__35c_x",welcome:"home_welcome__2-URb",logo:"home_logo__3H0_E",logoItems:"home_logoItems__1t_Jw",buttons:"home_buttons__KU6p2",profileButton:"home_profileButton__3Sf0M",contentContainer:"home_contentContainer__mOXy5",content:"home_content__UCOVS"}},265:function(e,t){},267:function(e,t){},291:function(e,t){},293:function(e,t){},306:function(e,t,n){},307:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(2),a=n.n(r),i=n(138),s=n.n(i),u=n(311),o=n(312),l=n(3),d=n(309),j=n(13),b=n.n(j),f=URLSearchParams&&document.location.search?new URLSearchParams(document.location.search).get("webid"):null,p=function(){var e=Object(r.useState)(f),t=Object(l.a)(e,2),n=t[0],a=t[1];if(f){return Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n&&b.a.login(n)},children:[Object(c.jsx)("div",{className:"field",children:Object(c.jsxs)("div",{className:"control",children:[Object(c.jsx)("label",{htmlFor:"webid",className:"label",children:"Your WebID:"}),Object(c.jsx)("input",{type:"url",name:"webid",id:"webid",className:"input is-large",value:n||"",onChange:function(e){e.preventDefault(),a(e.target.value)}})]})}),Object(c.jsx)("div",{className:"field",children:Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{type:"submit",className:"button is-primary is-large",value:"Connect"})})})]})}return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(d.a,{popup:"popup.html",className:"button is-large is-primary",children:"Connect"})})},O=n(50),h=n(310),m=n(1),x=n(4),v=n.n(x),g=n(7),S=n(141),_=n(48),N=function(){var e=Object(g.a)(v.a.mark((function e(t,n,c){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=c.addSubject()).addRef(m.b.type,m.c.DataFeed),r.addString(m.c.name,t),r.addString(m.c.url,n),r.addDateTime(m.c.dateCreated,new Date(Date.now())),e.next=7,c.save([r]);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),w=function(e,t){var n=e.getDateTime(m.c.dateModified),c=t.getDateTime(m.c.dateModified),r=e.getDateTime(m.c.dateCreated),a=t.getDateTime(m.c.dateCreated),i=null!==n&&void 0!==n?n:r,s=null!==c&&void 0!==c?c:a;return null===s?-1:null===i?1:s.getTime()-i.getTime()},D=function(e){return e.getSubjectsOfType(m.c.DataFeed)},y=n(16),R=function(e){var t=Object(r.useState)(),n=Object(l.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){Object(y.d)(e).then(a)}),[e]),[c,a]},C=(n(184),function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],i=n[1],s=Object(r.useState)(e.feedSource.getString(m.c.url)||""),u=Object(l.a)(s,2),o=u[0],d=u[1],j=Object(r.useState)(e.feedSource.getString(m.c.name)||""),b=Object(l.a)(j,2),f=b[0],p=b[1],O=function(){var t=Object(g.a)(v.a.mark((function t(n){var c,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),i(!0),t.next=4,e.onChange(f);case 4:return(c=t.sent)&&p(c.getString(m.c.name)),t.next=8,e.onChange(o);case 8:(r=t.sent)&&d(r.getString(m.c.url)),i(!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();if("editing"===e.mode){var h=a?"is-loading":"";return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:O,className:"content",children:[Object(c.jsx)("div",{className:"field",children:Object(c.jsxs)("div",{className:"control",children:[Object(c.jsx)("label",{htmlFor:"feedName",children:"Feed Name:"}),Object(c.jsx)("input",{name:"feedName",value:f,onChange:function(e){e.preventDefault(),p(e.target.value)},type:"text",required:!0}),Object(c.jsx)("label",{htmlFor:"feedURL",children:"Feed URL:"}),Object(c.jsx)("input",{name:"feedURL",value:o,onChange:function(e){e.preventDefault(),d(e.target.value)},type:"url",required:!0})]})}),Object(c.jsxs)("div",{className:"field is-grouped",children:[Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{type:"submit",className:"button is-primary ".concat(h),disabled:a,children:"Save"})}),Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{onClick:function(t){e.onCancelEdit()},className:"button is-text",children:"Cancel"})})]})]})})}return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("article",{className:"card",children:Object(c.jsxs)("div",{className:"section content",children:[Object(c.jsx)("div",{children:f}),Object(c.jsx)("div",{children:o})]})})})}),F=n(148),k=n.n(F),L=function(e){var t=e.onSave,n=Object(r.useState)(!1),a=Object(l.a)(n,2),i=a[0],s=a[1],u=Object(r.useState)(""),o=Object(l.a)(u,2),d=o[0],j=o[1],b=Object(r.useState)(""),f=Object(l.a)(b,2),p=f[0],O=f[1],h=function(){var e=Object(g.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s(!0),e.next=4,t(p,d);case 4:j(""),O(""),s(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=i?"is-loading":"";return Object(c.jsx)("div",{className:k.a.addFeed,children:Object(c.jsxs)("form",{onSubmit:h,children:[Object(c.jsx)("div",{children:Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"feedName",children:"Feed Name:"}),Object(c.jsx)("input",{name:"feedName",placeholder:"EFF",value:p,onChange:function(e){e.preventDefault(),O(e.target.value)},type:"text",required:!0}),Object(c.jsx)("label",{htmlFor:"feedURL",children:"Feed URL:"}),Object(c.jsx)("input",{name:"feedURL",placeholder:"ex:https://www.eff.org/rss/updates.xml",value:d,onChange:function(e){e.preventDefault(),j(e.target.value)},type:"url",required:!0})]})}),Object(c.jsx)("div",{children:Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",className:"button is-primary ".concat(m),disabled:i,children:"Add Feed"})})})]})})},E=n(19),T=n.n(E),U=function(e){var t=e.podData,n=R(t.feedSourcesDoc),r=Object(l.a)(n,2),i=r[0],s=r[1],u=a.a.useReducer((function(e,t){var n=Object(l.a)(t,2),c=n[0];return n[1]?e.concat(c):e.filter((function(e){return e!==c}))}),[]),o=Object(l.a)(u,2),d=o[0],j=o[1];if(!i)return null;function b(){return(b=Object(g.a)(v.a.mark((function e(t,n){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N(t,n,i);case 4:c=e.sent,s(c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(g.a)(v.a.mark((function e(t,n){var c,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=i){e.next=3;break}return e.abrupt("return");case 3:return n.setString(m.c.text,t),n.setDateTime(m.c.dateModified,new Date(Date.now())),e.next=7,c.save();case 7:return(r=e.sent)&&(j([n.asRef(),!1]),s(r)),e.abrupt("return",r.getSubject(n.asRef()));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(g.a)(v.a.mark((function e(t){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i){e.next=3;break}return e.abrupt("return");case 3:return n.removeSubject(t.asRef()),e.next=6,n.save();case 6:c=e.sent,s(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=D(i).sort(w).map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:T.a.feedSourceElement,children:[Object(c.jsx)(C,{feedSource:e,onChange:function(t){return function(e,t){return f.apply(this,arguments)}(t,e)},onCancelEdit:function(){return j([e.asRef(),!1])},mode:d.includes(e.asRef())?"editing":"viewing"}),Object(c.jsx)("div",{children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("a",{onClick:function(){return j([e.asRef(),!0])},title:"Edit this feed",className:T.a.action,role:"button",children:[Object(c.jsx)("span",{children:Object(c.jsx)("img",{src:S.a,alt:""})}),"Edit"]}),Object(c.jsxs)("a",{onClick:function(){return function(e){return p.apply(this,arguments)}(e)},title:"Delete this feed",className:T.a.action,role:"button",children:[Object(c.jsx)("span",{children:Object(c.jsx)("img",{src:_.a,alt:""})}),"Delete"]})]})})]}),Object(c.jsx)("hr",{})]},e.asRef())}));return Object(c.jsxs)("div",{className:T.a.container,children:[Object(c.jsx)("div",{className:T.a.item,children:Object(c.jsx)(L,{onSave:function(e,t){return b.apply(this,arguments)}})}),Object(c.jsx)("div",{className:T.a.item,children:O})]})},I=function(e){var t=e.article,n=Object(r.useState)(!1),a=Object(l.a)(n,2);a[0],a[1];if(!t)return null;var i=t.getString(m.c.url),s=t.getString(m.c.name);return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("article",{className:"card",children:Object(c.jsx)("div",{className:"section content",children:Object(c.jsx)("a",{href:i,children:s})})})})},A=function(e){return e.getSubjectsOfType(m.c.WebPage)},P=function(e){var t=e.podData,n=R(t.articlesDoc),r=Object(l.a)(n,2),a=r[0],i=r[1];if(!a)return null;function s(){return(s=Object(g.a)(v.a.mark((function e(t){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a){e.next=3;break}return e.abrupt("return");case 3:return n.removeSubject(t.asRef()),e.next=6,n.save();case 6:c=e.sent,i(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=A(a).sort(w).map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:T.a.feedSourceElement,children:[Object(c.jsx)(I,{article:e}),Object(c.jsx)("div",{children:Object(c.jsxs)("a",{onClick:function(){return function(e){return s.apply(this,arguments)}(e)},title:"Delete this article",className:T.a.action,role:"button",children:[Object(c.jsx)("span",{children:Object(c.jsx)("img",{src:_.a,alt:""})}),"Delete"]})})]}),Object(c.jsx)("hr",{})]},e.asRef())}));return Object(c.jsx)("div",{className:T.a.container,children:u})},q=n(149),B=n.n(q),M=function(e){var t=e.podData;return Object(c.jsxs)("div",{className:B.a.page,children:[Object(c.jsx)("h2",{children:"Feeds "}),Object(c.jsx)(U,{podData:t}),Object(c.jsx)("h2",{children:"Saved Articles "}),Object(c.jsx)(P,{podData:t})]})},W=n(39),J=function(){var e=Object(g.a)(v.a.mark((function e(t,n,c){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=c.addSubject()).addRef(m.b.type,m.c.WebPage),r.addString(m.c.name,t),r.addString(m.c.url,n),e.next=6,c.save([r]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),V=function(e){var t=e.articleName,n=e.articleURL,a=e.articlesList,i=A(a).some((function(e){return e.getString(m.c.url)===n})),s=Object(r.useState)(i),u=Object(l.a)(s,2),o=u[0],d=u[1],j=function(){var e=Object(g.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t,n,a);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"button",disabled:o,onClick:function(e){e.preventDefault(),j(t,n),d(!0)},children:o?"Saved!":"Save"})})},H=n(150),X=n.n(H),Y=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new X.a,e.next=3,n.parseURL("https://cors-anywhere.herokuapp.com/"+t);case 3:return c=e.sent,e.abrupt("return",c.items);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(e){var t=e.feedSource,n=e.feedName,a=e.articlesList,i=Object(r.useState)([]),s=Object(l.a)(i,2),u=s[0],o=s[1];Object(r.useEffect)((function(){(function(){var e=Object(g.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t);case 2:n=e.sent,o([].concat(Object(W.a)(u),Object(W.a)(n)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var d=u.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsxs)("div",{children:["[",n,"]",Object(c.jsx)("a",{href:e.link,children:e.title}),Object(c.jsx)(V,{articleName:e.title,articleURL:e.link,articlesList:a})]})},e.link)}));return Object(c.jsx)("div",{children:Object(c.jsx)("ul",{children:d})})},z=n(85),G=n.n(z),K=function(e){var t=e.podData,n=R(t.feedSourcesDoc),r=Object(l.a)(n,2),a=r[0],i=(r[1],R(t.articlesDoc)),s=Object(l.a)(i,2),u=s[0];s[1];if(!a)return null;var o=D(a),d=(u&&A(u),o.map((function(e){var t=e.getString(m.c.url),n=e.getString(m.c.name);return Object(c.jsx)("li",{children:Object(c.jsx)(Z,{feedSource:t,feedName:n,articlesList:u})},t)})));return Object(c.jsx)("div",{children:Object(c.jsx)("ul",{children:d})})},Q=function(e){var t=e.podData;return Object(c.jsx)("div",{className:G.a.container,children:Object(c.jsx)(K,{podData:t})})},$=n(21),ee=n.n($),te=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(O.a)(),s=Object(r.useMemo)((function(){return"string"===typeof i?function(e){var t=Object(y.b)().isFoundAt(e),n=Object(y.c)().isFoundAt(e),c=Object(y.a)().isFoundOn(n,m.e.storage),r=Object(y.b)().isFoundOn(n,m.d.publicTypeIndex),a=Object(y.c)().isEnsuredIn(r).withRef(m.b.type,m.d.TypeRegistration).withRef(m.d.forClass,m.c.DataFeed),i=Object(y.c)().isEnsuredIn(r).withRef(m.b.type,m.d.TypeRegistration).withRef(m.d.forClass,m.c.WebPage);return{webId:e,profileDoc:t,publicTypeIndex:r,feedSourcesDoc:Object(y.b)().isEnsuredOn(a,m.d.instance,c),articlesDoc:Object(y.b)().isEnsuredOn(i,m.d.instance,c)}}(i):void 0}),[i]),u=function(e){var t=Object(r.useState)(),n=Object(l.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){e&&Object(y.d)(e.profileDoc).then((function(t){var n=null===t||void 0===t?void 0:t.getSubject(e.webId);t&&n&&a(n)}))}),[e]),c}(s);if(!s)return Object(c.jsx)("section",{className:"section",children:Object(c.jsx)("p",{className:"content",children:"Loading data\u2026"})});var o=u?u.getString(m.a.name):null,d=o?"Welcome to your feed, ".concat(o):"Feed";return Object(c.jsxs)("div",{className:ee.a.page,children:[Object(c.jsx)("div",{className:ee.a.navContainer,children:Object(c.jsxs)("div",{className:ee.a.nav,children:[Object(c.jsxs)("div",{className:ee.a.logoItems,children:[Object(c.jsx)("h1",{className:ee.a.logo,children:"Solid RSS"}),Object(c.jsx)("p",{children:Object(c.jsx)("a",{href:"https://github.com/RRustom/solid-rss",title:"View the source code on GitHub",children:"Source code"})})]}),Object(c.jsx)("h2",{className:ee.a.welcome,children:d}),Object(c.jsxs)("div",{className:ee.a.buttons,children:[Object(c.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),a((function(e){return!n}))},class:ee.a.profileButton,children:n?"Feed":"Profile"}),Object(c.jsx)(h.a,{})]})]})}),Object(c.jsx)("div",{className:ee.a.contentContainer,children:n?Object(c.jsx)(M,{name:o,podData:s}):Object(c.jsx)(Q,{name:o,podData:s})})]})},ne=n(51),ce=n.n(ne),re=function(){return Object(c.jsxs)("div",{className:ce.a.page,children:[Object(c.jsx)(u.a,{children:Object(c.jsx)(te,{})}),Object(c.jsx)(o.a,{children:Object(c.jsx)("div",{className:ce.a.center,children:Object(c.jsxs)("div",{className:ce.a.login,children:[Object(c.jsx)("h1",{children:" A simple RSS reader for Solid "}),Object(c.jsx)("p",{className:"content",children:"Connect to your Pod to begin."}),Object(c.jsx)(p,{})]})})})]})};n(306);s.a.render(Object(c.jsx)(re,{}),document.getElementById("root"))},51:function(e,t,n){e.exports={page:"App_page__1AVsN",center:"App_center__3qpZh",login:"App_login__2Y3DD"}},85:function(e,t,n){e.exports={container:"dashboard_container__2bVR6"}}},[[307,1,2]]]);
//# sourceMappingURL=main.7256d154.chunk.js.map