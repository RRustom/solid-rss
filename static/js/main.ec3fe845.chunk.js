(this["webpackJsonpsolid-rss"]=this["webpackJsonpsolid-rss"]||[]).push([[0],{155:function(e,t,n){},181:function(e,t){},183:function(e,t){},266:function(e,t){},268:function(e,t){},292:function(e,t){},294:function(e,t){},307:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),a=n.n(r),s=n(137),i=n.n(s),u=(n(155),n(149)),l=n(311),o=n(312),j=n(3),d=n(309),b=n(14),f=n.n(b),O=URLSearchParams&&document.location.search?new URLSearchParams(document.location.search).get("webid"):null,p=function(){var e=Object(r.useState)(O),t=Object(j.a)(e,2),n=t[0],a=t[1];if(O){return Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n&&f.a.login(n)},children:[Object(c.jsx)("div",{className:"field",children:Object(c.jsxs)("div",{className:"control",children:[Object(c.jsx)("label",{htmlFor:"webid",className:"label",children:"Your WebID:"}),Object(c.jsx)("input",{type:"url",name:"webid",id:"webid",className:"input is-large",value:n||"",onChange:function(e){e.preventDefault(),a(e.target.value)}})]})}),Object(c.jsx)("div",{className:"field",children:Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("input",{type:"submit",className:"button is-primary is-large",value:"Connect"})})})]})}return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(d.a,{popup:"popup.html",className:"button is-large is-primary",children:"Connect"})})},h=n(49),m=n(310),x=n(2),v=n(4),g=n.n(v),N=n(7),S=n(141),w=n(47),D=function(){var e=Object(N.a)(g.a.mark((function e(t,n,c){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=c.addSubject()).addRef(x.b.type,x.c.DataFeed),r.addString(x.c.name,t),r.addString(x.c.url,n),r.addDateTime(x.c.dateCreated,new Date(Date.now())),e.next=7,c.save([r]);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),y=function(e,t){var n=e.getDateTime(x.c.dateModified),c=t.getDateTime(x.c.dateModified),r=e.getDateTime(x.c.dateCreated),a=t.getDateTime(x.c.dateCreated),s=null!==n&&void 0!==n?n:r,i=null!==c&&void 0!==c?c:a;return null===i?-1:null===s?1:i.getTime()-s.getTime()},k=function(e){return e.getSubjectsOfType(x.c.DataFeed)},R=n(16),F=function(e){var t=Object(r.useState)(),n=Object(j.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){Object(R.d)(e).then(a)}),[e]),[c,a]},C=n(86),L=n.n(C),T=function(e){var t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(e.feedSource.getString(x.c.url)||""),u=Object(j.a)(i,2),l=u[0],o=u[1],d=Object(r.useState)(e.feedSource.getString(x.c.name)||""),b=Object(j.a)(d,2),f=b[0],O=b[1],p=function(){var t=Object(N.a)(g.a.mark((function t(n){var c,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),s(!0),t.next=4,e.onChange(f);case 4:return(c=t.sent)&&O(c.getString(x.c.name)),t.next=8,e.onChange(l);case 8:(r=t.sent)&&o(r.getString(x.c.url)),s(!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();if("editing"===e.mode){var h=a?"is-loading":"";return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:p,className:"content",children:[Object(c.jsx)("div",{className:"field",children:Object(c.jsxs)("div",{className:"control",children:[Object(c.jsx)("label",{htmlFor:"feedName",children:"Feed Name:"}),Object(c.jsx)("input",{name:"feedName",value:f,onChange:function(e){e.preventDefault(),O(e.target.value)},type:"text",required:!0}),Object(c.jsx)("label",{htmlFor:"feedURL",children:"Feed URL:"}),Object(c.jsx)("input",{name:"feedURL",value:l,onChange:function(e){e.preventDefault(),o(e.target.value)},type:"url",required:!0})]})}),Object(c.jsxs)("div",{className:"field is-grouped",children:[Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{type:"submit",className:"button is-primary ".concat(h),disabled:a,children:"Save"})}),Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{onClick:function(t){e.onCancelEdit()},className:"button is-text",children:"Cancel"})})]})]})})}return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("article",{className:"card",children:Object(c.jsxs)("div",{className:"section content",children:[Object(c.jsx)(L.a,{source:f||""}),Object(c.jsx)(L.a,{source:l||""})]})})})},E=function(e){var t=e.onSave,n=Object(r.useState)(!1),a=Object(j.a)(n,2),s=a[0],i=a[1],u=Object(r.useState)(""),l=Object(j.a)(u,2),o=l[0],d=l[1],b=Object(r.useState)(""),f=Object(j.a)(b,2),O=f[0],p=f[1],h=function(){var e=Object(N.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),i(!0),e.next=4,t(O,o);case 4:d(""),p(""),i(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=s?"is-loading":"";return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:h,children:[Object(c.jsx)("div",{className:"field",children:Object(c.jsxs)("div",{className:"control",children:[Object(c.jsx)("label",{htmlFor:"feedName",children:"Feed Name:"}),Object(c.jsx)("input",{name:"feedName",placeholder:"EFF",value:O,onChange:function(e){e.preventDefault(),p(e.target.value)},type:"text",required:!0}),Object(c.jsx)("label",{htmlFor:"feedURL",children:"Feed URL:"}),Object(c.jsx)("input",{name:"feedURL",placeholder:"ex:https://www.eff.org/rss/updates.xml",value:o,onChange:function(e){e.preventDefault(),d(e.target.value)},type:"url",required:!0})]})}),Object(c.jsx)("div",{className:"field",children:Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{type:"submit",className:"button is-primary ".concat(m),disabled:s,children:"Add Feed"})})})]})})},U=function(e){var t=e.podData,n=F(t.feedSourcesDoc),r=Object(j.a)(n,2),s=r[0],i=r[1],u=a.a.useReducer((function(e,t){var n=Object(j.a)(t,2),c=n[0];return n[1]?e.concat(c):e.filter((function(e){return e!==c}))}),[]),l=Object(j.a)(u,2),o=l[0],d=l[1];if(!s)return null;function b(){return(b=Object(N.a)(g.a.mark((function e(t,n){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,D(t,n,s);case 4:c=e.sent,i(c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(N.a)(g.a.mark((function e(t,n){var c,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=s){e.next=3;break}return e.abrupt("return");case 3:return n.setString(x.c.text,t),n.setDateTime(x.c.dateModified,new Date(Date.now())),e.next=7,c.save();case 7:return(r=e.sent)&&(d([n.asRef(),!1]),i(r)),e.abrupt("return",r.getSubject(n.asRef()));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(N.a)(g.a.mark((function e(t){var n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s){e.next=3;break}return e.abrupt("return");case 3:return n.removeSubject(t.asRef()),e.next=6,n.save();case 6:c=e.sent,i(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=k(s).sort(y).map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"columns",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(T,{feedSource:e,onChange:function(t){return function(e,t){return f.apply(this,arguments)}(t,e)},onCancelEdit:function(){return d([e.asRef(),!1])},mode:o.includes(e.asRef())?"editing":"viewing"})}),Object(c.jsx)("div",{className:"column is-narrow is-2-desktop",children:Object(c.jsxs)("nav",{className:"panel",children:[Object(c.jsxs)("a",{onClick:function(){return d([e.asRef(),!0])},title:"Edit this feed",className:"panel-block",role:"button",children:[Object(c.jsx)("span",{className:"panel-icon",children:Object(c.jsx)("img",{src:S.a,alt:""})}),"Edit"]}),Object(c.jsxs)("a",{onClick:function(){return function(e){return O.apply(this,arguments)}(e)},title:"Delete this feed",className:"panel-block",role:"button",children:[Object(c.jsx)("span",{className:"panel-icon",children:Object(c.jsx)("img",{src:w.a,alt:""})}),"Delete"]})]})})]}),Object(c.jsx)("hr",{})]},e.asRef())}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("section",{className:"section",children:Object(c.jsx)(E,{onSave:function(e,t){return b.apply(this,arguments)}})}),Object(c.jsx)("section",{className:"section",children:p})]})},I=function(e){var t=e.article,n=Object(r.useState)(!1),a=Object(j.a)(n,2);a[0],a[1];if(!t)return null;var s=t.getString(x.c.url),i=t.getString(x.c.name);return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("article",{className:"card",children:Object(c.jsx)("div",{className:"section content",children:Object(c.jsx)("a",{href:s,children:i})})})})},P=function(e){return e.getSubjectsOfType(x.c.WebPage)},W=function(e){var t=e.podData,n=F(t.articlesDoc),r=Object(j.a)(n,2),a=r[0],s=r[1];if(!a)return null;function i(){return(i=Object(N.a)(g.a.mark((function e(t){var n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a){e.next=3;break}return e.abrupt("return");case 3:return n.removeSubject(t.asRef()),e.next=6,n.save();case 6:c=e.sent,s(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=P(a).sort(y).map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"columns",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(I,{article:e})}),Object(c.jsx)("div",{className:"column is-narrow is-2-desktop",children:Object(c.jsx)("nav",{className:"panel",children:Object(c.jsxs)("a",{onClick:function(){return function(e){return i.apply(this,arguments)}(e)},title:"Delete this article",className:"panel-block",role:"button",children:[Object(c.jsx)("span",{className:"panel-icon",children:Object(c.jsx)("img",{src:w.a,alt:""})}),"Delete"]})})})]}),Object(c.jsx)("hr",{})]},e.asRef())}));return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("section",{className:"section",children:u})})},q=function(e){var t=e.podData;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Feeds: "}),Object(c.jsx)(U,{podData:t}),Object(c.jsx)("h2",{children:"Saved Articles: "}),Object(c.jsx)(W,{podData:t})]})},A=n(38),M=function(){var e=Object(N.a)(g.a.mark((function e(t,n,c){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=c.addSubject()).addRef(x.b.type,x.c.WebPage),r.addString(x.c.name,t),r.addString(x.c.url,n),e.next=6,c.save([r]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),J=function(e){var t=e.articleName,n=e.articleURL,a=e.articlesList,s=P(a).some((function(e){return e.getString(x.c.url)===n})),i=Object(r.useState)(s),u=Object(j.a)(i,2),l=u[0],o=u[1],d=function(){var e=Object(N.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t,n,a);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"button",disabled:l,onClick:function(e){e.preventDefault(),d(t,n),o(!0)},children:l?"Saved!":"Save"})})},B=n(148),G=n.n(B),H=function(){var e=Object(N.a)(g.a.mark((function e(t){var n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new G.a,e.next=3,n.parseURL("https://cors-anywhere.herokuapp.com/"+t);case 3:return c=e.sent,e.abrupt("return",c.items);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=e.feedSource,n=e.feedName,a=e.articlesList,s=Object(r.useState)([]),i=Object(j.a)(s,2),u=i[0],l=i[1];Object(r.useEffect)((function(){(function(){var e=Object(N.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:n=e.sent,l([].concat(Object(A.a)(u),Object(A.a)(n)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var o=u.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsxs)("div",{children:["[",n,"]",Object(c.jsx)("a",{href:e.link,children:e.title}),Object(c.jsx)(J,{articleName:e.title,articleURL:e.link,articlesList:a})]})},e.link)}));return Object(c.jsx)("div",{children:Object(c.jsx)("ul",{children:o})})},Y=function(e){var t=e.podData,n=F(t.feedSourcesDoc),r=Object(j.a)(n,2),a=r[0],s=(r[1],F(t.articlesDoc)),i=Object(j.a)(s,2),u=i[0];i[1];if(!a)return null;var l=k(a),o=(u&&P(u),l.map((function(e){var t=e.getString(x.c.url),n=e.getString(x.c.name);return Object(c.jsx)("li",{children:Object(c.jsx)(V,{feedSource:t,feedName:n,articlesList:u})},t)})));return Object(c.jsx)("div",{children:Object(c.jsx)("ul",{children:o})})},z=function(e){var t=e.name,n=e.podData,r=t?"Welcome to your feed, ".concat(t):"Feed";return Object(c.jsxs)("div",{children:[Object(c.jsx)("section",{className:"section",children:Object(c.jsx)("h1",{className:"title",children:r})}),Object(c.jsx)(Y,{podData:n})]})},K=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(h.a)(),i=Object(r.useMemo)((function(){return"string"===typeof s?function(e){var t=Object(R.b)().isFoundAt(e),n=Object(R.c)().isFoundAt(e),c=Object(R.a)().isFoundOn(n,x.e.storage),r=Object(R.b)().isFoundOn(n,x.d.publicTypeIndex),a=Object(R.c)().isEnsuredIn(r).withRef(x.b.type,x.d.TypeRegistration).withRef(x.d.forClass,x.c.DataFeed),s=Object(R.c)().isEnsuredIn(r).withRef(x.b.type,x.d.TypeRegistration).withRef(x.d.forClass,x.c.WebPage);return{webId:e,profileDoc:t,publicTypeIndex:r,feedSourcesDoc:Object(R.b)().isEnsuredOn(a,x.d.instance,c),articlesDoc:Object(R.b)().isEnsuredOn(s,x.d.instance,c)}}(s):void 0}),[s]),u=function(e){var t=Object(r.useState)(),n=Object(j.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){e&&Object(R.d)(e.profileDoc).then((function(t){var n=null===t||void 0===t?void 0:t.getSubject(e.webId);t&&n&&a(n)}))}),[e]),c}(i);if(!i)return Object(c.jsx)("section",{className:"section",children:Object(c.jsx)("p",{className:"content",children:"Loading data\u2026"})});var l=u?u.getString(x.a.name):null;return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),a((function(e){return!n}))},children:n?"Feed":"Profile"})}),n?Object(c.jsx)(q,{name:l,podData:i}):Object(c.jsx)(z,{name:l,podData:i}),Object(c.jsx)("footer",{className:"footer",children:Object(c.jsxs)("div",{className:"columns",children:[Object(c.jsx)("p",{className:"column content",children:Object(c.jsx)("a",{href:"https://github.com/RRustom/solid-rss",title:"View the source code on GitHub",children:"Source code"})}),Object(c.jsx)("div",{className:"column has-text-right",children:Object(c.jsx)(m.a,{className:"button"})})]})})]})},Q=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(l.a,{children:Object(c.jsx)(u.a,{children:Object(c.jsx)(K,{path:"/"})})}),Object(c.jsx)(o.a,{children:Object(c.jsx)("section",{className:"section",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("p",{className:"content",children:"Please connect to your Pod to start taking notes."}),Object(c.jsx)(p,{})]})})})]})};i.a.render(Object(c.jsx)(Q,{}),document.getElementById("root"))}},[[307,1,2]]]);
//# sourceMappingURL=main.ec3fe845.chunk.js.map