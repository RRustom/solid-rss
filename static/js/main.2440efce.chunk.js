(this["webpackJsonpsolid-rss"]=this["webpackJsonpsolid-rss"]||[]).push([[0],{155:function(e,t,n){},181:function(e,t){},183:function(e,t){},266:function(e,t){},268:function(e,t){},292:function(e,t){},294:function(e,t){},307:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),a=n.n(r),s=n(136),i=n.n(s),u=(n(155),n(148)),o=n(311),l=n(312),j=n(310),d=n(4),b=n(49),f=n(309),O=n(2),p=n(3),h=n.n(p),x=n(7),m=n(140),v=n(47),g=function(){var e=Object(x.a)(h.a.mark((function e(t,n,c){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=c.addSubject()).addRef(O.b.type,O.c.DataFeed),r.addString(O.c.name,t),r.addString(O.c.url,n),r.addDateTime(O.c.dateCreated,new Date(Date.now())),e.next=7,c.save([r]);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),N=function(e,t){var n=e.getDateTime(O.c.dateModified),c=t.getDateTime(O.c.dateModified),r=e.getDateTime(O.c.dateCreated),a=t.getDateTime(O.c.dateCreated),s=null!==n&&void 0!==n?n:r,i=null!==c&&void 0!==c?c:a;return null===i?-1:null===s?1:i.getTime()-s.getTime()},S=function(e){return e.getSubjectsOfType(O.c.DataFeed)},w=n(16),D=function(e){var t=Object(r.useState)(),n=Object(d.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){Object(w.d)(e).then(a)}),[e]),[c,a]},y=n(86),k=n.n(y),R=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(e.feedSource.getString(O.c.url)||""),u=Object(d.a)(i,2),o=u[0],l=u[1],j=Object(r.useState)(e.feedSource.getString(O.c.name)||""),b=Object(d.a)(j,2),f=b[0],p=b[1],m=function(){var t=Object(x.a)(h.a.mark((function t(n){var c,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),s(!0),t.next=4,e.onChange(f);case 4:return(c=t.sent)&&p(c.getString(O.c.name)),t.next=8,e.onChange(o);case 8:(r=t.sent)&&l(r.getString(O.c.url)),s(!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();if("editing"===e.mode){var v=a?"is-loading":"";return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:m,className:"content",children:[Object(c.jsx)("div",{className:"field",children:Object(c.jsxs)("div",{className:"control",children:[Object(c.jsx)("label",{htmlFor:"feedName",children:"Feed Name:"}),Object(c.jsx)("input",{name:"feedName",value:f,onChange:function(e){e.preventDefault(),p(e.target.value)},type:"text",required:!0}),Object(c.jsx)("label",{htmlFor:"feedURL",children:"Feed URL:"}),Object(c.jsx)("input",{name:"feedURL",value:o,onChange:function(e){e.preventDefault(),l(e.target.value)},type:"url",required:!0})]})}),Object(c.jsxs)("div",{className:"field is-grouped",children:[Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{type:"submit",className:"button is-primary ".concat(v),disabled:a,children:"Save"})}),Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{onClick:function(t){e.onCancelEdit()},className:"button is-text",children:"Cancel"})})]})]})})}return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("article",{className:"card",children:Object(c.jsxs)("div",{className:"section content",children:[Object(c.jsx)(k.a,{source:f||""}),Object(c.jsx)(k.a,{source:o||""})]})})})},F=function(e){var t=e.onSave,n=Object(r.useState)(!1),a=Object(d.a)(n,2),s=a[0],i=a[1],u=Object(r.useState)(""),o=Object(d.a)(u,2),l=o[0],j=o[1],b=Object(r.useState)(""),f=Object(d.a)(b,2),O=f[0],p=f[1],m=function(){var e=Object(x.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),i(!0),e.next=4,t(O,l);case 4:j(""),p(""),i(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=s?"is-loading":"";return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:m,children:[Object(c.jsx)("div",{className:"field",children:Object(c.jsxs)("div",{className:"control",children:[Object(c.jsx)("label",{htmlFor:"feedName",children:"Feed Name:"}),Object(c.jsx)("input",{name:"feedName",placeholder:"EFF",value:O,onChange:function(e){e.preventDefault(),p(e.target.value)},type:"text",required:!0}),Object(c.jsx)("label",{htmlFor:"feedURL",children:"Feed URL:"}),Object(c.jsx)("input",{name:"feedURL",placeholder:"ex:https://www.eff.org/rss/updates.xml",value:l,onChange:function(e){e.preventDefault(),j(e.target.value)},type:"url",required:!0})]})}),Object(c.jsx)("div",{className:"field",children:Object(c.jsx)("div",{className:"control",children:Object(c.jsx)("button",{type:"submit",className:"button is-primary ".concat(v),disabled:s,children:"Add Feed"})})})]})})},C=function(e){var t=e.podData,n=D(t.feedSourcesDoc),r=Object(d.a)(n,2),s=r[0],i=r[1],u=a.a.useReducer((function(e,t){var n=Object(d.a)(t,2),c=n[0];return n[1]?e.concat(c):e.filter((function(e){return e!==c}))}),[]),o=Object(d.a)(u,2),l=o[0],j=o[1];if(!s)return null;function b(){return(b=Object(x.a)(h.a.mark((function e(t,n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,g(t,n,s);case 4:c=e.sent,i(c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(x.a)(h.a.mark((function e(t,n){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=s){e.next=3;break}return e.abrupt("return");case 3:return n.setString(O.c.text,t),n.setDateTime(O.c.dateModified,new Date(Date.now())),e.next=7,c.save();case 7:return(r=e.sent)&&(j([n.asRef(),!1]),i(r)),e.abrupt("return",r.getSubject(n.asRef()));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(x.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s){e.next=3;break}return e.abrupt("return");case 3:return n.removeSubject(t.asRef()),e.next=6,n.save();case 6:c=e.sent,i(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=S(s).sort(N).map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"columns",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(R,{feedSource:e,onChange:function(t){return function(e,t){return f.apply(this,arguments)}(t,e)},onCancelEdit:function(){return j([e.asRef(),!1])},mode:l.includes(e.asRef())?"editing":"viewing"})}),Object(c.jsx)("div",{className:"column is-narrow is-2-desktop",children:Object(c.jsxs)("nav",{className:"panel",children:[Object(c.jsxs)("a",{onClick:function(){return j([e.asRef(),!0])},title:"Edit this feed",className:"panel-block",role:"button",children:[Object(c.jsx)("span",{className:"panel-icon",children:Object(c.jsx)("img",{src:m.a,alt:""})}),"Edit"]}),Object(c.jsxs)("a",{onClick:function(){return function(e){return p.apply(this,arguments)}(e)},title:"Delete this feed",className:"panel-block",role:"button",children:[Object(c.jsx)("span",{className:"panel-icon",children:Object(c.jsx)("img",{src:v.a,alt:""})}),"Delete"]})]})})]}),Object(c.jsx)("hr",{})]},e.asRef())}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("section",{className:"section",children:Object(c.jsx)(F,{onSave:function(e,t){return b.apply(this,arguments)}})}),Object(c.jsx)("section",{className:"section",children:w})]})},L=function(e){var t=e.article,n=Object(r.useState)(!1),a=Object(d.a)(n,2);a[0],a[1];if(!t)return null;var s=t.getString(O.c.url),i=t.getString(O.c.name);return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("article",{className:"card",children:Object(c.jsx)("div",{className:"section content",children:Object(c.jsx)("a",{href:s,children:i})})})})},T=function(e){return e.getSubjectsOfType(O.c.WebPage)},E=function(e){var t=e.podData,n=D(t.articlesDoc),r=Object(d.a)(n,2),a=r[0],s=r[1];if(!a)return null;function i(){return(i=Object(x.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a){e.next=3;break}return e.abrupt("return");case 3:return n.removeSubject(t.asRef()),e.next=6,n.save();case 6:c=e.sent,s(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=T(a).sort(N).map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"columns",children:[Object(c.jsx)("div",{className:"column",children:Object(c.jsx)(L,{article:e})}),Object(c.jsx)("div",{className:"column is-narrow is-2-desktop",children:Object(c.jsx)("nav",{className:"panel",children:Object(c.jsxs)("a",{onClick:function(){return function(e){return i.apply(this,arguments)}(e)},title:"Delete this article",className:"panel-block",role:"button",children:[Object(c.jsx)("span",{className:"panel-icon",children:Object(c.jsx)("img",{src:v.a,alt:""})}),"Delete"]})})})]}),Object(c.jsx)("hr",{})]},e.asRef())}));return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("section",{className:"section",children:u})})},U=function(e){var t=e.podData;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Feeds: "}),Object(c.jsx)(C,{podData:t}),Object(c.jsx)("h2",{children:"Saved Articles: "}),Object(c.jsx)(E,{podData:t})]})},I=n(38),q=function(){var e=Object(x.a)(h.a.mark((function e(t,n,c){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=c.addSubject()).addRef(O.b.type,O.c.WebPage),r.addString(O.c.name,t),r.addString(O.c.url,n),e.next=6,c.save([r]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),A=function(e){var t=e.articleName,n=e.articleURL,a=e.articlesList,s=T(a).some((function(e){return e.getString(O.c.url)===n})),i=Object(r.useState)(s),u=Object(d.a)(i,2),o=u[0],l=u[1],j=function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t,n,a);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"button",disabled:o,onClick:function(e){e.preventDefault(),j(t,n),l(!0)},children:o?"Saved!":"Save"})})},M=n(147),P=n.n(M),W=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new P.a,e.next=3,n.parseURL("https://cors-anywhere.herokuapp.com/"+t);case 3:return c=e.sent,e.abrupt("return",c.items);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){var t=e.feedSource,n=e.feedName,a=e.articlesList,s=Object(r.useState)([]),i=Object(d.a)(s,2),u=i[0],o=i[1];Object(r.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:n=e.sent,o([].concat(Object(I.a)(u),Object(I.a)(n)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var l=u.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsxs)("div",{children:["[",n,"]",Object(c.jsx)("a",{href:e.link,children:e.title}),Object(c.jsx)(A,{articleName:e.title,articleURL:e.link,articlesList:a})]})},e.link)}));return Object(c.jsx)("div",{children:Object(c.jsx)("ul",{children:l})})},B=function(e){var t=e.podData,n=D(t.feedSourcesDoc),r=Object(d.a)(n,2),a=r[0],s=(r[1],D(t.articlesDoc)),i=Object(d.a)(s,2),u=i[0];i[1];if(!a)return null;var o=S(a),l=(u&&T(u),o.map((function(e){var t=e.getString(O.c.url),n=e.getString(O.c.name);return Object(c.jsx)("li",{children:Object(c.jsx)(J,{feedSource:t,feedName:n,articlesList:u})},t)})));return Object(c.jsx)("div",{children:Object(c.jsx)("ul",{children:l})})},G=function(e){var t=e.name,n=e.podData,r=t?"Welcome to your feed, ".concat(t):"Feed";return Object(c.jsxs)("div",{children:[Object(c.jsx)("section",{className:"section",children:Object(c.jsx)("h1",{className:"title",children:r})}),Object(c.jsx)(B,{podData:n})]})},H=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(b.a)(),i=Object(r.useMemo)((function(){return"string"===typeof s?function(e){var t=Object(w.b)().isFoundAt(e),n=Object(w.c)().isFoundAt(e),c=Object(w.a)().isFoundOn(n,O.e.storage),r=Object(w.b)().isFoundOn(n,O.d.publicTypeIndex),a=Object(w.c)().isEnsuredIn(r).withRef(O.b.type,O.d.TypeRegistration).withRef(O.d.forClass,O.c.DataFeed),s=Object(w.c)().isEnsuredIn(r).withRef(O.b.type,O.d.TypeRegistration).withRef(O.d.forClass,O.c.WebPage);return{webId:e,profileDoc:t,publicTypeIndex:r,feedSourcesDoc:Object(w.b)().isEnsuredOn(a,O.d.instance,c),articlesDoc:Object(w.b)().isEnsuredOn(s,O.d.instance,c)}}(s):void 0}),[s]),u=function(e){var t=Object(r.useState)(),n=Object(d.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){e&&Object(w.d)(e.profileDoc).then((function(t){var n=null===t||void 0===t?void 0:t.getSubject(e.webId);t&&n&&a(n)}))}),[e]),c}(i);if(!i)return Object(c.jsx)("section",{className:"section",children:Object(c.jsx)("p",{className:"content",children:"Loading data\u2026"})});var o=u?u.getString(O.a.name):null;return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),a((function(e){return!n}))},children:n?"Feed":"Profile"})}),n?Object(c.jsx)(U,{name:o,podData:i}):Object(c.jsx)(G,{name:o,podData:i}),Object(c.jsx)("footer",{className:"footer",children:Object(c.jsxs)("div",{className:"columns",children:[Object(c.jsx)("p",{className:"column content",children:Object(c.jsx)("a",{href:"https://github.com/RRustom/solid-rss",title:"View the source code on GitHub",children:"Source code"})}),Object(c.jsx)("div",{className:"column has-text-right",children:Object(c.jsx)(f.a,{className:"button"})})]})})]})},V=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(o.a,{children:Object(c.jsx)(u.a,{children:Object(c.jsx)(H,{path:"/"})})}),Object(c.jsx)(l.a,{children:Object(c.jsx)("section",{className:"section",children:Object(c.jsx)("div",{className:"container",children:Object(c.jsx)(j.a,{popup:"popup.html",className:"button is-large is-primary",children:"Log in"})})})})]})};i.a.render(Object(c.jsx)(V,{}),document.getElementById("root"))}},[[307,1,2]]]);
//# sourceMappingURL=main.2440efce.chunk.js.map